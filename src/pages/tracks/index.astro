---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCourseCatalog } from '../../lib/academyData';
import { TRACKS, hydrateTrack } from '../../lib/tracks';

const catalog = await getCourseCatalog();
const hydratedTracks = TRACKS.map((track) => hydrateTrack(track, catalog));
---

<BaseLayout
  title="GreyBrain Tracks | Goal-Based Learning Paths"
  description="Compare GreyBrain learning tracks for clinical AI practice, research acceleration, and doctor entrepreneurship."
  canonical="https://gbdeeplearn.pages.dev/tracks"
>
  <section class="mb-8 rounded-[2rem] bg-slate-950 px-6 py-8 text-white shadow-2xl md:px-8 md:py-10">
    <p class="mb-3 inline-flex rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.15em] text-cyan-100">
      Track Catalog
    </p>
    <h1 class="text-3xl font-extrabold leading-tight md:text-4xl">Choose Your AI Outcome Path</h1>
    <p class="mt-3 max-w-3xl text-sm text-slate-200 md:text-base">
      Coursera-style track packaging for healthcare professionals: compare goals, duration, and included courses.
    </p>
  </section>

  <section class="mb-8 grid gap-4 md:grid-cols-3">
    {hydratedTracks.map((track) => (
      <article class="rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-md backdrop-blur-sm">
        <p class="text-xs font-semibold uppercase tracking-[0.13em] text-emerald-700">{track.duration}</p>
        <h2 class="mt-2 text-xl font-bold text-slate-900">{track.title}</h2>
        <p class="mt-2 text-sm text-slate-600">{track.tagline}</p>
        <p class="mt-2 text-xs text-slate-500">Ideal for: {track.idealFor}</p>
        <p class="mt-2 text-xs text-slate-500">{track.includedCourses.length} included courses</p>
        <a href={`/tracks/${track.slug}`} class="mt-4 inline-flex rounded-xl bg-slate-900 px-3 py-2 text-sm font-semibold text-white transition hover:bg-slate-800">
          View Track
        </a>
      </article>
    ))}
  </section>

  <section class="rounded-3xl border border-slate-200 bg-white/80 p-5 shadow-lg">
    <h2 class="text-2xl font-extrabold text-slate-900">Track Comparison</h2>
    <div class="mt-4 overflow-x-auto">
      <table class="min-w-full border-collapse text-left text-sm">
        <thead class="bg-slate-100 text-slate-700">
          <tr>
            <th class="px-3 py-2">Track</th>
            <th class="px-3 py-2">Duration</th>
            <th class="px-3 py-2">Ideal For</th>
            <th class="px-3 py-2">Courses</th>
            <th class="px-3 py-2">Action</th>
          </tr>
        </thead>
        <tbody>
          {hydratedTracks.map((track) => (
            <tr class="border-t border-slate-200">
              <td class="px-3 py-2 font-semibold text-slate-900">{track.title}</td>
              <td class="px-3 py-2 text-slate-700">{track.duration}</td>
              <td class="px-3 py-2 text-slate-700">{track.idealFor}</td>
              <td class="px-3 py-2 text-slate-700">{track.includedCourses.length}</td>
              <td class="px-3 py-2">
                <a href={`/tracks/${track.slug}`} class="rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50">
                  Open
                </a>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  </section>
</BaseLayout>
