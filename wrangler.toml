name = "deeplearn-worker"
main = "src/worker.js"
compatibility_date = "2026-02-27"
account_id = "9f4998a66a5d7bd7a230d0222544fbe6"
workers_dev = true

[vars]
APP_NAME = "DeepLearn"
PAGES_PROJECT = "gbdeeplearn"
CERTIFICATE_BUCKET = "gbdeeplearn-certificates"
LEADS_BUCKET = "gbdeeplearn-leads"
GROQ_API_BASE_URL = "https://api.groq.com/openai/v1"
GROQ_MODEL = "llama-3.3-70b-versatile"
AI_GATEWAY_NAME = "deeplearn-gateway"
AI_GATEWAY_BASE_URL = "https://gateway.ai.cloudflare.com/v1/9f4998a66a5d7bd7a230d0222544fbe6/deeplearn-gateway/compat"
TURNSTILE_REQUIRED = "true"

[ai]
binding = "AI"

[[vectorize]]
binding = "DEEPLEARN_INDEX"
index_name = "deeplearn-index"

[[r2_buckets]]
binding = "DEEPLEARN_ASSETS"
bucket_name = "gbdeeplearn-assets"
preview_bucket_name = "gbdeeplearn-assets-preview"

[[r2_buckets]]
binding = "DEEPLEARN_CERTIFICATES"
bucket_name = "gbdeeplearn-certificates"
preview_bucket_name = "gbdeeplearn-certificates-preview"

[[r2_buckets]]
binding = "DEEPLEARN_LEADS"
bucket_name = "gbdeeplearn-leads"
preview_bucket_name = "gbdeeplearn-leads-preview"

[[d1_databases]]
binding = "DEEPLEARN_DB"
database_name = "deeplearn-ops"
database_id = "b15b876d-4a7b-4633-b89f-b20eaf535f46"

[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true
head_sampling_rate = 1

[triggers]
crons = ["30 3 * * *"]
